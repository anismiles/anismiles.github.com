/* Want to work for us? Drop a typo-free email to jobs at webklipper dot com */

(function(){var _d=document;var _webengageTag=_d.getElementsByTagName('webengage')[0];var _weTagCorrectlyConfigured=false;if(_webengageTag&&_webengageTag.attributes){var attributes=_webengageTag.attributes;if(attributes.license){_weTagCorrectlyConfigured=true;var licenseCode=attributes.license.value;var appHost=attributes.host.value;var staticHost=attributes.staticHost.value;var containerId="webklipper-publisher-widget-container";var WebEngageWidgetInitializer={version:"1.1",feedbackButtonTypes:new Array("dark-big","light-big","dark-small","light-small"),feedbackButtonAlignment:new Array("right","left"),tabValues:new Array("like","question","suggestion","problem"),containerCss:{"position":"fixed","backgroundColor":"#fff"},containerRightCss:{"right":"0px","borderRight":"none"},containerLeftCss:{"left":"0px","borderLeft":"none"},containerDarkCss:{"border":"5px solid #ccc"},containerLightCss:{"border":"5px solid #333"},commonCss:{"cursor":"pointer","backgroundRepeat":"no-repeat"},closeCommonCss:{"height":"22px","width":"22px","cursor":"pointer","backgroundRepeat":"no-repeat","backgroundPosition":"0 0","borderRadius":"5px","MozBorderRadius":"5px","WebkitBorderRadius":"5px","position":"absolute","top":"-14px","backgroundImage":"url('"+staticHost+"/images/icons/feedback-widget-close.png')","backgroundColor":"transparent","display":"none"},leftCloseCss:{"right":"-14px"},rightCloseCss:{"left":"-14px"},darkCss:{"backgroundImage":"url('"+staticHost+"/images/icons/publisher-widget-sprite-dark.gif')","backgroundColor":"#333"},lightCss:{"backgroundImage":"url('"+staticHost+"/images/icons/publisher-widget-sprite-light.gif')","backgroundColor":"#ccc"},bigCss:{"height":"99px","width":"28px","backgroundPosition":"0 0"},smallCss:{"height":"28px","width":"29px","backgroundPosition":"-25px 4px"},loadingCss:{"fontFamily":"Arial, sans-serif","fontSize":"10px","color":"#666","textDecoration":"none","position":"absolute","textAlign":"center"},window:window,containerId:containerId,maxWidth:"590px",maxHeight:(navigator.userAgent.indexOf('MSIE')!=-1?"350px":"346px")};var WebEngageUtil={applyCss:function(elem,css){for(var key in css){elem.style[key]=css[key];}return elem;},inArray:function(arr,needle){for(var i=0;i<arr.length;i++){if(arr[i]==needle){return true;}}return false;},getMaxZIndex:function(){var maxZIndex=0;var allElems=_d.getElementsByTagName?_d.getElementsByTagName("*"):_d.all;for(var i=0;i<allElems.length;i++){var elem=allElems[i];var cStyle=null;if(elem.currentStyle){cStyle=elem.currentStyle;}else if(_d.defaultView&&_d.defaultView.getComputedStyle){cStyle=_d.defaultView.getComputedStyle(elem,"");}var sNum;if(cStyle){sNum=Number(cStyle.zIndex);}else{sNum=Number(elem.style.zIndex);}if(!isNaN(sNum)){maxZIndex=Math.max(maxZIndex,sNum);}}return maxZIndex;},extendObjects:function(to,from){if(!to)to={};for(var key in from){to[key]=from[key];}return to;},getButtonCssBasedOnConfig:function(buttonType){var finalCss={};if(buttonType.indexOf("dark")===0){finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.darkCss);}else{finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.lightCss);}if(buttonType.indexOf("big")>=0){finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.bigCss);}else{finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.smallCss);}return finalCss;},getContainerCssBasedOnConfig:function(buttonType,buttonAlignment){var finalCss={};if(buttonType.indexOf("dark")===0){finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.containerDarkCss);}else{finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.containerLightCss);}if(buttonAlignment=="right"){finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.containerRightCss);}else{finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.containerLeftCss);}return finalCss;},getCloseCssBasedOnConfig:function(buttonType,buttonAlignment){var finalCss={};if(buttonAlignment=="right"){finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.rightCloseCss);}else{finalCss=WebEngageUtil.extendObjects(finalCss,WebEngageWidgetInitializer.leftCloseCss);}return finalCss;},alignCenter:function(elem,container){elem.style.top=(parseInt(WebEngageUtil.getElementHeight(container))-parseInt(WebEngageUtil.getElementHeight(elem)))/2-7+"px";elem.style.left=(parseInt(WebEngageUtil.getElementWidth(container))-parseInt(WebEngageUtil.getElementWidth(elem)))/2+10+"px";},getElementWidth:function(elem){if(typeof elem.clip!=="undefined"){return elem.clip.width;}else{if(elem.style.pixelWidth){return elem.style.pixelWidth;}else{return elem.offsetWidth;}}},getElementHeight:function(elem){if(typeof elem.clip!=="undefined"){return elem.clip.height;}else{if(elem.style.pixelHeight){return elem.style.pixelHeight;}else{return elem.offsetHeight;}}},getWebEngageAttributeValue:function(attrName,defaultValue,masterSet){var attributes=_webengageTag.attributes;var attrVal=defaultValue?defaultValue:null;if(attributes&&attributes[attrName]){if(masterSet){if(WebEngageUtil.inArray(masterSet,attributes[attrName].value)){attrVal=attributes[attrName].value;}}else{attrVal=attributes[attrName].value;}}return attrVal;},addToOnload:function(func){if(window.addEventListener){window.addEventListener('load',func,false);}else if(window.attachEvent){window.attachEvent('onload',func);}else{window.onload=func;}}};var buttonType=WebEngageUtil.getWebEngageAttributeValue("feedbackButtonType",WebEngageWidgetInitializer.feedbackButtonTypes[0],WebEngageWidgetInitializer.feedbackButtonTypes);var buttonAlignment=WebEngageUtil.getWebEngageAttributeValue("feedbackButtonAlignment",WebEngageWidgetInitializer.feedbackButtonAlignment[0],WebEngageWidgetInitializer.feedbackButtonAlignment);var minWidth=buttonType.indexOf("big")>0?"28px":"29px";var minHeight=buttonType.indexOf("big")>0?"99px":"28px";var collapsedWidgetWidth=parseInt(minWidth);WebEngageWidgetInitializer.minWidth=minWidth;WebEngageWidgetInitializer.minHeight=minHeight;WebEngageWidgetInitializer.appHost=appHost;WebEngageWidgetInitializer.staticHost=staticHost;WebEngageWidgetInitializer.licenseCode=licenseCode;WebEngageWidgetInitializer.defaultTab=WebEngageUtil.getWebEngageAttributeValue("defaultTab","question",WebEngageWidgetInitializer.tabValues);WebEngageWidgetInitializer.showFeedbackButton=WebEngageUtil.getWebEngageAttributeValue("showFeedbackButton","true");WebEngageWidgetInitializer.externalLinkId=WebEngageUtil.getWebEngageAttributeValue("externalLinkId");(function(){var container=_d.createElement('div');container.setAttribute('id',containerId);_d.body.appendChild(container);var fixedFrameContainer=_d.createElement('div');container.appendChild(fixedFrameContainer);fixedFrameContainer.setAttribute('id',containerId+'-content');var ffcStyle=fixedFrameContainer.style;fixedFrameContainer=WebEngageUtil.applyCss(fixedFrameContainer,WebEngageWidgetInitializer.containerCss);fixedFrameContainer=WebEngageUtil.applyCss(fixedFrameContainer,WebEngageUtil.getContainerCssBasedOnConfig(buttonType,buttonAlignment));ffcStyle.top=(("innerHeight"in window?window.innerHeight:_d.documentElement.clientHeight)-parseInt(minHeight))/2+"px";ffcStyle.height=minHeight;ffcStyle.width=collapsedWidgetWidth;ffcStyle.zIndex=(WebEngageUtil.getMaxZIndex()+1);var closeContainer=_d.createElement("div");fixedFrameContainer.appendChild(closeContainer);closeContainer.id=containerId+"-close-div";closeContainer=WebEngageUtil.applyCss(closeContainer,WebEngageWidgetInitializer.closeCommonCss);closeContainer=WebEngageUtil.applyCss(closeContainer,WebEngageUtil.getCloseCssBasedOnConfig(buttonType,buttonAlignment));closeContainer.style.zIndex=WebEngageUtil.getMaxZIndex()+1;var expandCollapse=_d.createElement('div');fixedFrameContainer.appendChild(expandCollapse);expandCollapse.setAttribute("id",containerId+"-content-expand-collapse");var ecStyle=expandCollapse.style;ecStyle.width=minWidth;expandCollapse=WebEngageUtil.applyCss(expandCollapse,WebEngageWidgetInitializer.commonCss);expandCollapse=WebEngageUtil.applyCss(expandCollapse,WebEngageUtil.getButtonCssBasedOnConfig(buttonType));ecStyle.height="100%";ecStyle.zIndex=WebEngageUtil.getMaxZIndex()+1;if(WebEngageWidgetInitializer.showFeedbackButton!="true"){fixedFrameContainer.style.display='none';}closeContainer.onclick=function(){try{fixedFrameContainer.removeChild(_d.getElementById(containerId+"-loading"));}catch(e){}try{fixedFrameContainer.removeChild(_d.getElementById(containerId+"-content"));}catch(e){}try{_d.getElementById(containerId+"-content-expand-collapse").isCurrentlyOpen=false;}catch(e){}fixedFrameContainer.style.width=minWidth;fixedFrameContainer.style.height=minHeight;this.style.display="none";if(!WebEngageWidgetInitializer.showFeedbackButton){expandCollapse.style.display='none';}};expandCollapse.onclick=function(){if(!this.isCurrentlyOpen){fixedFrameContainer.style.display='block';this.isCurrentlyOpen=true;fixedFrameContainer.style.width="150px";fixedFrameContainer.style.height="99px";var loadingDiv=_d.createElement("div");loadingDiv.id=containerId+"-loading";loadingDiv=WebEngageUtil.applyCss(loadingDiv,WebEngageWidgetInitializer.loadingCss);loadingDiv.innerHTML="Loading<br/>please wait ...";fixedFrameContainer.appendChild(loadingDiv);WebEngageUtil.alignCenter(loadingDiv,fixedFrameContainer);closeContainer.style.display="block";var isJQueryPresent=(typeof jQuery!='undefined'&&parseInt(jQuery().jquery.replace(/\./g,""))>=130);var widgetScript=_d.createElement("script");widgetScript.type="text/javascript";widgetScript.src=appHost+"/js/widget/webengage-widget-loader.js?licenseCode="+WebEngageWidgetInitializer.licenseCode+"&jQuery="+isJQueryPresent+"&r= "+Math.random();container.appendChild(widgetScript);}};var externalLinkId=WebEngageWidgetInitializer.externalLinkId;if(externalLinkId){var bindFeedbackToLink=function(){var theExtLink=_d.getElementById(externalLinkId);if(theExtLink){theExtLink.onclick=function(evt){var e=evt?evt:event;if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}expandCollapse.onclick();return false;}}};if(_d.getElementById(externalLinkId)){bindFeedbackToLink();}else{WebEngageUtil.addToOnload(bindFeedbackToLink);}}_d.$WebEngageWidgetInitializer=WebEngageWidgetInitializer;})();}}if(!_weTagCorrectlyConfigured){alert("The widget code on your site doesn't seem to be correct.\nLog-on to http://webklipper.com/webengage to get your correct code.");}})();