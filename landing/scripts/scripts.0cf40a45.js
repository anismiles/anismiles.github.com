function RelcyService(a,b,c,d){var e="https://dev-w.relcy.com/app";return d(e,{client_id:"@client_id",platform:"@platform",phone_number:"@phone_number",ambassador_id:"@ambassador_id"},{savePhoneNumber:{method:"GET",url:e+"?platform=:platform&phone_number=:phone_number&client_id=:client_id",responseType:"json"}})}!function(a){"use strict";function b(a,b){return a.module("angularSpinner",[]).provider("usSpinnerConfig",function(){var a={};return{setDefaults:function(b){a=b||a},$get:function(){return{config:a}}}}).factory("usSpinnerService",["$rootScope",function(a){var b={};return b.spin=function(b){a.$broadcast("us-spinner:spin",b)},b.stop=function(b){a.$broadcast("us-spinner:stop",b)},b}]).directive("usSpinner",["$window","usSpinnerConfig",function(c,d){return{scope:!0,link:function(e,f,g){function h(){e.spinner&&e.spinner.stop()}var i=b||c.Spinner;e.spinner=null,e.key=a.isDefined(g.spinnerKey)?g.spinnerKey:!1,e.startActive=a.isDefined(g.spinnerStartActive)?e.$eval(g.spinnerStartActive):e.key?!1:!0,e.spin=function(){e.spinner&&e.spinner.spin(f[0])},e.stop=function(){e.startActive=!1,h()},e.$watch(g.usSpinner,function(a){h(),a=a||{};for(var b in d.config)void 0===a[b]&&(a[b]=d.config[b]);e.spinner=new i(a),(!e.key||e.startActive)&&e.spinner.spin(f[0])},!0),e.$on("us-spinner:spin",function(a,b){b===e.key&&e.spin()}),e.$on("us-spinner:stop",function(a,b){b===e.key&&e.stop()}),e.$on("$destroy",function(){e.stop(),e.spinner=null})}}}])}"function"==typeof define&&define.amd?define(["angular","spin"],b):b(a.angular)}(window),function(){function a(){}function b(a){return f.retinaImageSuffix+a}function c(a,c){if(this.path=a||"","undefined"!=typeof c&&null!==c)this.at_2x_path=c,this.perform_check=!1;else{if(void 0!==document.createElement){var d=document.createElement("a");d.href=this.path,d.pathname=d.pathname.replace(g,b),this.at_2x_path=d.href}else{var e=this.path.split("?");e[0]=e[0].replace(g,b),this.at_2x_path=e.join("?")}this.perform_check=!0}}function d(a){this.el=a,this.path=new c(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var b=this;this.path.check_2x_variant(function(a){a&&b.swap()})}var e="undefined"==typeof exports?window:exports,f={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};e.Retina=a,a.configure=function(a){null===a&&(a={});for(var b in a)a.hasOwnProperty(b)&&(f[b]=a[b])},a.init=function(a){null===a&&(a=e);var b=a.onload||function(){};a.onload=function(){var a,c,e=document.getElementsByTagName("img"),f=[];for(a=0;a<e.length;a+=1)c=e[a],c.getAttributeNode("data-no-retina")||f.push(new d(c));b()}},a.isRetina=function(){var a="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return e.devicePixelRatio>1?!0:e.matchMedia&&e.matchMedia(a).matches?!0:!1};var g=/\.\w+$/;e.RetinaImagePath=c,c.confirmed_paths=[],c.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},c.prototype.check_2x_variant=function(a){var b,d=this;return this.is_external()?a(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in c.confirmed_paths?a(!0):(b=new XMLHttpRequest,b.open("HEAD",this.at_2x_path),b.onreadystatechange=function(){if(4!==b.readyState)return a(!1);if(b.status>=200&&b.status<=399){if(f.check_mime_type){var e=b.getResponseHeader("Content-Type");if(null===e||!e.match(/^image/i))return a(!1)}return c.confirmed_paths.push(d.at_2x_path),a(!0)}return a(!1)},b.send(),void 0):a(!0)},e.RetinaImage=d,d.prototype.swap=function(a){function b(){c.el.complete?(f.force_original_dimensions&&(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight)),c.el.setAttribute("src",a)):setTimeout(b,5)}"undefined"==typeof a&&(a=this.path.at_2x_path);var c=this;b()},a.isRetina()&&a.init(e)}(),angular.module("siteApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","angularSpinner"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/thankyou",{templateUrl:"views/thankyou.html",controller:"ThanksController"}).otherwise({redirectTo:"/"})}]),angular.module("siteApp").controller("MainCtrl",["$scope","RelcyService","usSpinnerService","$timeout","$location",function(a,b,c,d,e){a.phoneNumber="",a.platform="ios",a.message="",a.save=function(){c.spin("invite"),a.platform=$("#ios").parent().hasClass("active")?"ios":"android",b.savePhoneNumber({client_id:"131a22184a",platform:a.platform,phone_number:a.phoneNumber},function(){c.stop("invite"),mixpanel.track("Landing-Invite-"+a.platform),e.path("thankyou"),d(function(){a.phoneNumber="",a.message=""},3e3)},function(b){mixpanel.track("Landing-Invite-failed"),a.phoneNumber="",401==b.status&&(a.message="Not Authorized"),500==b.status&&(a.message="Error! Please contact beta@relcy.com"),400==b.status&&(a.message='theoretically it should not occur, but show a pop-up saying "Required Fields are Missing"'),403==b.status&&(a.message="Already sent the SMS twice for this number. Please contact beta@relcy.com"),d(function(){a.message=""},5e3),c.stop("invite")})}}]),angular.module("siteApp").controller("ThanksController",["$scope","RelcyService","usSpinnerService","$timeout",function(a,b,c,d){a.message=""}]),angular.module("siteApp").service("RelcyService",["$timeout","$q","$http","$resource",RelcyService]);