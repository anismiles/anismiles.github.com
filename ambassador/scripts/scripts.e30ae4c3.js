"use strict";function AmbassadorService(a,b,c,d){return d("http://webapp.relcy.com/redis/24/hmget/",{id:"@id",ambId:"@ambId",CID:"@CID",email:"@email",name:"@name",phone:"@phone",platform:"@platform"},{login:{method:"GET",url:"http://webapp.relcy.com/redis/24/hmget/:id/name/email",responseType:"json"},invitation:{method:"GET",url:"https://staging-w.relcy.com/app?ambassador_id=:ambId&client_id=:CID&email_address=:email&name=:name&phone_number=:phone&platform=:platform"}})}angular.module("relcyMobileInvitePageApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/invitation",{templateUrl:"views/invitation.html",controller:"InvitationController"}).when("/invited",{templateUrl:"views/invited.html",controller:"InvitedCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("relcyMobileInvitePageApp").controller("MainCtrl",["$scope","AmbassadorService","$location","$timeout","$rootScope",function(a,b,c,d,e){a.name="",a.ambassadorCode="",a.message="",a.login=function(){e.ambId=a.ambassadorCode,b.login({id:a.ambassadorCode},function(b){console.log(b),b.hmget[0]==a.name||b.hmget[1]==a.name?c.path("/invitation"):(a.message="Authentication failed!",d(function(){a.message=""},5e3))},function(a){console.log(a)})}}]),angular.module("relcyMobileInvitePageApp").controller("InvitedCtrl",["$scope","$rootScope","$location",function(a,b,c){b.ambId&&""!=b.ambId||c.path("/"),a.name=b.name,a.back=function(){c.path("invitation")},a.inviteAgain=function(){b.backtoinvite=!0,c.path("invitation")}}]),angular.module("relcyMobileInvitePageApp").controller("InvitationController",["$scope","AmbassadorService","$location","$rootScope",function(a,b,c,d){d.ambId&&""!=d.ambId||c.path("/"),a.name="",a.email="",a.phone="",a.platform="ios",a.message="",d.backtoinvite&&(a.name=d.inviteObj.name,a.email=d.inviteObj.email,a.phone=d.inviteObj.phone,a.platform=d.inviteObj.platform,"ios"==a.platform?($("#android").parent().removeClass("active"),$("#ios").parent().addClass("active")):($("#ios").parent().removeClass("active"),$("#android").parent().addClass("active")),d.backtoinvite=!1),a.invite=function(){a.message="",d.name=a.name,d.inviteObj={ambId:d.ambId,CID:"5f4903021e",email:a.email,name:a.name,phone:a.phone,platform:a.platform},a.platform=$("#ios").parent().hasClass("active")?"ios":"android",b.invitation(d.inviteObj,function(a){c.path("invited")},function(b){a.message=b.data.message,console.log(b)})}}]),angular.module("relcyMobileInvitePageApp").service("AmbassadorService",["$timeout","$q","$http","$resource",AmbassadorService]);